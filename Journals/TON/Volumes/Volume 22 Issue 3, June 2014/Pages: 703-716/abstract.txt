We study the optimal usage-based pricing problem in a resource-constrained network with one profit-maximizing service provider and multiple groups of surplus-maximizing users. With the assumption that the service provider knows the utility function of each user (thus complete information), we find that the complete price differentiation scheme can achieve a large revenue gain (e.g., 50%) compared to no price differentiation, when the total network resource is comparably limited and the high-willingness-to-pay users are minorities. However, the complete price differentiation scheme may lead to a high implementational complexity. To trade off the revenue against the implementational complexity, we further study the partial price differentiation scheme and design a polynomial-time algorithm that can compute the optimal partial differentiation prices. We also consider the incomplete information case where the service provider does not know to which group each user belongs. We show that it is still possible to realize price differentiation under this scenario and provide the sufficient and necessary condition under which an incentive-compatible differentiation scheme can achieve the same revenue as under complete information.